<!--<section class="fixed bottom-18 right-4 z-75 w-full max-w-sm">-->
<!--    <div id="notificationPanel" class="hidden bg-white border-l-4 border-blue-500 p-4 shadow-lg rounded-lg animate-slide-in">-->
<!--        <div class="flex justify-between items-start gap-2">-->
<!--            <div>-->
<!--                <p class="font-semibold text-blue-700">New Notification</p>-->
<!--                <p class="text-sm text-gray-700 mt-1" id="notificationMessage">-->
<!--                    Welcome to Sem-Store! Start exploring now.-->
<!--                </p>-->
<!--            </div>-->
<!--            <button onclick="closeNotification()" class="text-gray-400 hover:text-gray-600">&times;</button>-->
<!--        </div>-->
<!--    </div>-->
<!--</section>-->
<!-- Fixed Notification Panel -->

<aside class="hidden fixed top-24 right-4 w-80 bg-white border border-blue-200 rounded-xl shadow-xl z-75">
    <div class="p-4 flex items-center justify-between border-b">
        <h2 class="text-lg font-semibold text-blue-700">Notifications</h2>
        <button onclick="clearNotifications()" class="text-sm text-blue-500 hover:underline">Clear All</button>
    </div>
    <ul id="notificationList" class="max-h-80 overflow-y-auto divide-y">
    </ul>
</aside>
<button onclick="togglePanel()" class="fixed bottom-6 right-6 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-full shadow-xl z-76">
    ðŸ””
</button>
<script type="module">
    import { dbPromise } from '/js/db.js';
    function togglePanel() {
        const panel = document.querySelector("aside");
        panel.classList.toggle("hidden");
    }
    window.togglePanel = togglePanel;


    function addNotification(msg) {
        const list = document.getElementById('notificationList');
        const item = document.createElement('li');
        item.className = 'p-4 text-sm text-gray-700';
        item.innerHTML = `
    <div class="flex justify-between items-start">
        <div>
            <p class="font-semibold text-blue-800">${msg.title}</p>
            <p class="text-gray-600">${msg.body}</p>
        </div>
        <button class="text-red-500 text-xs hover:underline ml-4" onclick="clearByid(${msg.id},this)">âœ•</button>
    </div>
`;
        list.prepend(item); // add new at top
    }

    async function clearByid(id,obj) {
        obj.closest('li').remove();
        const db=await dbPromise;
        await db.delete('notifications', id);
    }
    window.clearByid = clearByid;
    async function clearNotifications() {
        document.getElementById('notificationList').innerHTML = '';
        const db=await dbPromise;
        await db.clear('notifications');
    }
    window.clearNotifications = clearNotifications;
    // Example: Show one after page load
    window.addEventListener('load', async () => {
        const db = await dbPromise;
        const msgs =await db.getAll("notifications");
        let msg;
        for(msg  of msgs) {
            addNotification(msg);
        }

    });
</script>
<!--<style>-->
<!--    @keyframes slide-in {-->
<!--        0% { opacity: 0; transform: translateX(350px); }-->
<!--        100% { opacity: 1; transform: translateX(0); }-->
<!--    }-->
<!--    .animate-slide-in {-->
<!--        animation: slide-in 0.4s ease-out;-->
<!--    }-->
<!--</style>-->

<footer class="  bg-white py-6 border-t">
    <div class="text-center text-sm text-gray-600">
        &copy; 2025 Sem-Store | Made for IIT Gandhinagar
    </div>
</footer>
<script src="/startSW.js"></script>
